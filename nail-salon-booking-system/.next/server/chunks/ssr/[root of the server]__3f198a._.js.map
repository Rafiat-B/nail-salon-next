{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file://D%3A/JUZT-OYIN/nail-salon-next/nail-salon-booking-system/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const router = useRouter();\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n\r\n    // Basic client-side validation\r\n    if (!email.includes(\"@\") || !email.includes(\".\")) {\r\n      setError(\"Invalid email format\");\r\n      return;\r\n    }\r\n    if (password.length < 6) {\r\n      setError(\"Password must be at least 6 characters\");\r\n      return;\r\n    }\r\n\r\n  try {\r\n    interface LoginResponse {\r\n      user: {\r\n        role: string;\r\n        [key: string]: unknown; // Add other user properties if needed\r\n      };\r\n    }\r\n\r\n    const res = await axios.post<LoginResponse>(\"/api/auth/login\", { email, password }, {\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n\r\n    // Store the full user object in localStorage\r\n    localStorage.setItem(\"user\", JSON.stringify(res.data.user));\r\n\r\n    // Redirect based on role\r\n    if (res.data.user.role === \"admin\") {\r\n      router.push(\"/admin\");\r\n    } else {\r\n      router.push(\"/dashboard\");\r\n    }\r\n  } catch (err: unknown) {\r\n    // Define a type for Axios error structure\r\n    type AxiosErrorResponse = {\r\n      response?: {\r\n        data?: {\r\n          error?: string;\r\n        };\r\n      };\r\n    };\r\n\r\n    if (\r\n      typeof err === \"object\" &&\r\n      err !== null &&\r\n      \"response\" in err\r\n    ) {\r\n      const axiosErr = err as AxiosErrorResponse;\r\n      setError(axiosErr.response?.data?.error || \"Login failed. Please try again.\");\r\n    } else {\r\n      setError(\"An unexpected error occurred.\");\r\n    }\r\n  }\r\n};\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100 p-6\">\r\n      <div className=\"bg-white p-6 rounded shadow-md w-full max-w-md\">\r\n        <h2 className=\"text-2xl font-bold text-center text-pink-700\">Login</h2>\r\n        {error && <p className=\"text-red-600 text-center mt-2\">{error}</p>}\r\n        <form onSubmit={handleLogin}>\r\n          <label className=\"block text-gray-700 mt-4\">Email</label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"border p-2 w-full rounded\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n            placeholder=\"Enter your email\"\r\n          />\r\n          <label className=\"block text-gray-700 mt-4\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            className=\"border p-2 w-full rounded\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n            placeholder=\"Enter your password\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            className=\"mt-6 bg-pink-600 text-white px-4 py-2 rounded w-full hover:bg-pink-700 transition\"\r\n          >\r\n            Login\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AAEA;AADA;AAHA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc;QAChB,SAAS;QAET,+BAA+B;QAC/B,IAAI,CAAC,MAAM,QAAQ,CAAC,QAAQ,CAAC,MAAM,QAAQ,CAAC,MAAM;YAChD,SAAS;YACT;QACF;QACA,IAAI,SAAS,MAAM,GAAG,GAAG;YACvB,SAAS;YACT;QACF;QAEF,IAAI;YAQF,MAAM,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAAgB,mBAAmB;gBAAE;gBAAO;YAAS,GAAG;gBAClF,SAAS;oBAAE,gBAAgB;gBAAmB;YAChD;YAEA,6CAA6C;YAC7C,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,IAAI,IAAI,CAAC,IAAI;YAEzD,yBAAyB;YACzB,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,SAAS;gBAClC,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,OAAO,IAAI,CAAC;YACd;QACF,EAAE,OAAO,KAAc;YAUrB,IACE,OAAO,QAAQ,YACf,QAAQ,QACR,cAAc,KACd;gBACA,MAAM,WAAW;gBACjB,SAAS,SAAS,QAAQ,EAAE,MAAM,SAAS;YAC7C,OAAO;gBACL,SAAS;YACX;QACF;IACF;IAEE,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAA+C;;;;;;gBAC5D,uBAAS,8OAAC;oBAAE,WAAU;8BAAiC;;;;;;8BACxD,8OAAC;oBAAK,UAAU;;sCACd,8OAAC;4BAAM,WAAU;sCAA2B;;;;;;sCAC5C,8OAAC;4BACC,MAAK;4BACL,WAAU;4BACV,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,QAAQ;4BACR,aAAY;;;;;;sCAEd,8OAAC;4BAAM,WAAU;sCAA2B;;;;;;sCAC5C,8OAAC;4BACC,MAAK;4BACL,WAAU;4BACV,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4BAC3C,QAAQ;4BACR,aAAY;;;;;;sCAEd,8OAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}